<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BoWu_Bidding</title>
  <!-- Link Swiper's CSS -->
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
  <link rel="stylesheet" href="./assets/css/all.css" />
  <link rel="stylesheet" href='./assets/css/pages/signin.css'>
  <link rel="stylesheet" href="./assets/css/pages/bidding.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.12/vue.js"></script>
  <script src="./assets/js/jquery-3.5.1.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.0/gsap.min.js"></script>
  <!-- google -->
  <!-- <meta name="google-signin-scope" content="profile email"> -->
  <meta name="google-signin-client_id" content="5123688312-hh38n162r8fqfrd31n2a2hid0q7pk7uf.apps.googleusercontent.com">
  <script src="https://apis.google.com/js/platform.js" async defer></script>
  <!-- google -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
  
  
</head>

<body>
  @@include('./compontents/head.html')
  <div id="app_bidd">
  <div class="rightBlock block">
    <div class="title">
      <h1>競標商品</h1>
      <div></div>
      <h2>Buy the goods you like!</h2>
      <p>et dolore magna aliqua.</p>
    </div>
    <div class="swiper-container">
      <button class="swiper-button-prev"></button>
      <!-- <button class="slider_prev" @click="change(active-1)">
        <img src="./assets/img/Icon ionic-ios-arrow-forward.png">
      </button> -->
      <ul class="swiper-wrapper">
        <li class="swiper-slide" v-for="(src,index) in imgList">
          <img :data-id="dataId[index]" :src="src" @click="getData">
        </li>
      </ul>
      <!-- <ul class="swiper-wrapper">
        <li class="swiper-slide" v-for="(src,index) in imgList" v-show="index == active">
          <img :data-id="dataId[index]" :src="src" @click="getData">
        </li>
      </ul> -->
      <button class="swiper-button-next"></button>
      <!-- <button class="slider_next" @click="change(active+1)">
        <img src="./assets/img/Icon ionic-ios-arrow-forward1.png">
      </button> -->
    </div>
    <div class="bidding">
      <div>競標狀態:
        <span>{{itemMessage}}</span>
      </div>
      <div>競標倒數:
        <span>{{itemTime}}</span>
      </div>
    </div>

    <div class="introduce">
      <div class="introLeft">
        <h3>競標物品</h3>
        <div class="intro">
          <div class="pic">
            <!-- <img src="./assets/img/exh_5.jpg" alt=""> -->
            <img :src="imgSrc">
          </div>
          <div class="text">
            <h3>{{ExhibitName}}</h3>
            <p>{{ExhibitIntro}}</p>
            <div class="start">
              起始價格: <span> {{Sprice}}</span>
            </div>
            <div class="current">
              目前價格: <span>{{Nprice}}</span>
            </div>
            <div class="yourPrice">
              <div>您的出價:</div>
              <div class="price">
                <button @click="Nprice -= 1"><img src="./assets/img/-.png"></button>
                <input v-model.num="Nprice" :value="Nprice">
                <button @click="Nprice += 1"><img src="./assets/img/+.png"></button>
              </div>
            </div>
            <button @click="">我要競標</button>
          </div>
        </div>
      </div>
      <div class="introRight">
        <div class="top">
          <div @click="content='my-component'">討論區</div>
          <div @click="content='my-component1'">競標紀錄</div>
        </div>
        <component :is="content"></component>
      </div>
    </div>

  </div>
  </div>
  @@include('./compontents/searchbar.html')
  @@include('./compontents/music.html')
  @@include('./compontents/footer.html')
<!-- vue -->
  <script>
    Vue.component('my-component',{
    template:`
    <div class="content">
          <ul>
            <li>
              <p>Andy</p>
              <div class="personal">
                <img src="./assets/img/Ellipse 77.png" alt="">
                <p>Lorem ipsum dolor sit amet,
                  consetetur sadipscing elitr, sed
                  diam nonumy eirmod </p>
              </div>
            </li>
            <li>
              <p>Andy</p>
              <div class="personal">
                <img src="./assets/img/Ellipse 77.png" alt="">
                <p>Lorem ipsum dolor sit amet,
                  consetetur sadipscing elitr, sed
                  diam nonumy eirmod </p>
              </div>
            </li>
            <li>
              <p>Andy</p>
              <div class="personal">
                <img src="./assets/img/Ellipse 77.png" alt="">
                <p>Lorem ipsum dolor sit amet,
                  consetetur sadipscing elitr, sed
                  diam nonumy eirmod </p>
              </div>
            </li>
          </ul>
          <div class="message">
            <form action="">
              <textarea name="" id="" cols="30" rows="10" placeholder="留言"></textarea>
              <button>傳送</button>
            </form>

          </div>
        </div>
    `
  });
    Vue.component('my-component1',{
    template:`
    <div class="content">
      <h3>--component1--</h3>
    </div>
    `
  });

    new Vue({
      el:'#app_bidd',
      data:{
          active:0,
          imgList:[],
          dataId:[],
          NameList:[],
          Introduce:[],
          SpriceList:[],
          NpriceList:[],
          ExhibitName:'ImaginaryConstruction',
          ExhibitIntro:'Introductione here.... Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor.Introductione here...',
          Sprice:'333',
          Nprice:888,
          theId: '',
          content:'my-component',
          itemMessage:'競標中',
          itemTime:new Date(),
          imgSrc:'./assets/img/1.png',
          price: 888,
      },
      // 抓資料
      mounted() {
        axios.get("./assets/php/front/bidding.php").then((res) => {
              // console.log(res.data[0]);
              for(let i = 0; i<=res.data.length;i++){
                this.imgList.push(res.data[i].img_path);
                this.dataId.push(res.data[i].work_id);
                this.itemTime = res.data[i].bidding_time;
                this.NameList.push(res.data[i].work_name);
                this.Introduce.push(res.data[i].work_introduce);
                this.SpriceList.push(res.data[i].start_price);
                this.NpriceList.push(res.data[i].now_price)
                // console.log(this.imgList)
              }
        }).catch();
        // setTimeout(()=>{         
        //     this.dataId = product.dataId;
        //     this.imgList = product.imgList;
        //     this.ExhibitName = product.ExhibitName[0];
        // },500);
      },
      methods: {
        change(index){
                    this.active = (index + this.total) % this.total
                },
        getData(e){
              this.theId = e.target.dataset.id;   
              this.imgSrc = `./assets/img/${this.theId}.png`;
              this.ExhibitName = this.NameList[this.active];
              this.ExhibitIntro = this.Introduce[this.active];
              this.Sprice = this.SpriceList[this.active];
              this.Nprice = this.NpriceList[this.active]*1;


        },
      },
      computed:{
        total(){
                return this.imgList.length
              }
      },
      // watch:{
      //   count:function(val){
      //       this.type = typeof val;
      //   },
      // },
    });
  </script>
  <!-- Swiper JS -->
  <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
  <script>
    var swiper = new Swiper('.swiper-container', {
      slidesPerView: 4,
      centeredSlides: false,
      spaceBetween: 0,

      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
    });
    
  </script>
</body>
<!-- <script src="./assets/js/script.js"></script> -->
<script src="./assets/js/scriptBlack.js"></script>
<script src="./assets/js/exhibition.js"></script>
<script src="./assets/js/loginFB.js"></script>
<script src="./assets/js/loginGoogle.js"></script>
<script src='./assets/js/music.js'></script>
<script src='./assets/js/verify.js'></script>
<script src='./assets/js/logIn.js'></script>
</html>